<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>05-debounce函数防抖封装实现</title>
  </head>
  <body>
    <button id="btn">测试函数防抖</button>
  </body>
  <script>
    function debounce(callback, wait) {
      // 用来 保存定时器任务的标识 id
      let timerId = null
      return function (event) {
        if (timerId) {
          // 如果定时器存在就清除
          clearTimeout(timerId)
        }
        // 启动延迟 wait 时间后执行的定时器任务
        timerId = setTimeout(() => {
          // 调用 callback 处理事件
          callback.call(this, event)
          // 处理后重置定时器标识
          timerId = null
        }, wait)
      }
    }
  </script>
  <script>
    const btn = document.getElementById('btn')
    btn.onclick = debounce(function () {
      console.log('点击事件触发了')
    }, 500)
  </script>
</html>
